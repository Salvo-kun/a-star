# -*- coding: utf-8 -*-
"""
Created on Thu Jul 21 18:57:02 2022

@author: Salvo
"""
import matplotlib.pyplot as plt
import matplotlib.colors as cols
import numpy as np
import networkx as nx
import sys

if __name__ == '__main__':
    lines =[]
    size = int(sys.argv[3])

    # lines to 2d array
    with open(sys.argv[1]) as f:
        for i in range(4):
            print(f.readline())
            
        for i in f.readlines():
            if len(i.strip()) != 0:
                line = list(map(lambda c: 0 if c == '.' else 1, i.strip()))
                lines.append(line)
        a = np.array(lines)
        
    G = nx.grid_2d_graph(*a.shape)
    
    # remove those nodes where the corresponding value is != 0
    for val,node in zip(a.ravel(), sorted(G.nodes())):
        if val!=0:
            G.remove_node(node)
            
    path = [
        0, 1024, 2048, 3072, 4096, 5120, 6144, 7168, 8192, 9216, 10240, 11264, 12288, 13312, 14336, 15360, 16384, 17408, 18432, 19456, 20480, 21504, 22528, 23552, 24576, 25600, 26624, 27648, 28672, 29696, 30720, 31744, 32768, 33792, 34816, 35840, 36864, 37888, 38912, 39936, 40960, 41984, 43008, 44032, 45056, 46080, 47104, 48128, 49152, 50176, 51200, 52224, 53248, 54272, 55296, 56320, 57344, 58368, 59392, 60416, 61440, 62464, 63488, 64512, 65536, 66560, 67584, 68608, 69632, 70656, 71680, 72704, 73728, 74752, 75776, 76800, 77824, 78848, 79872, 80896, 81920, 82944, 83968, 84992, 86016, 87040, 88064, 89088, 90112, 91136, 92160, 93184, 94208, 95232, 96256, 97280, 98304, 99328, 100352, 101376, 102400, 103424, 104448, 105472, 106496, 107520, 108544, 109568, 110592, 111616, 112640, 113664, 114688, 115712, 116736, 117760, 118784, 119808, 120832, 121856, 122880, 123904, 124928, 125952, 126976, 128000, 129024, 130048, 131072, 132096, 133120, 134144, 135168, 136192, 137216, 138240, 139264, 140288, 141312, 142336, 143360, 144384, 145408, 146432, 147456, 148480, 149504, 150528, 151552, 152576, 153600, 154624, 155648, 156672, 157696, 158720, 159744, 160768, 161792, 162816, 163840, 164864, 165888, 166912, 167936, 168960, 169984, 171008, 172032, 173056, 174080, 175104, 176128, 177152, 178176, 179200, 180224, 181248, 182272, 183296, 184320, 185344, 186368, 187392, 188416, 189440, 190464, 191488, 192512, 193536, 194560, 195584, 196608, 197632, 198656, 199680, 200704, 201728, 202752, 203776, 204800, 205824, 206848, 207872, 208896, 208897, 208898, 208899, 208900, 208901, 209925, 209926, 210950, 210951, 211975, 212999, 213000, 214024, 214025, 215049, 215050, 216074, 217098, 217099, 218123, 218124, 219148, 219149, 220173, 221197, 221198, 221199, 221200, 221201, 221202, 221203, 221204, 221205, 221206, 221207, 221208, 221209, 221210, 221211, 221212, 221213, 221214, 221215, 221216, 221217, 221218, 221219, 221220, 221221, 221222, 221223, 221224, 221225, 221226, 221227, 221228, 221229, 221230, 221231, 221232, 221233, 221234, 221235, 221236, 221237, 221238, 221239, 221240, 221241, 221242, 221243, 221244, 221245, 221246, 221247, 221248, 221249, 221250, 221251, 221252, 221253, 221254, 221255, 221256, 221257, 221258, 221259, 221260, 221261, 221262, 221263, 221264, 221265, 221266, 221267, 221268, 221269, 221270, 221271, 221272, 221273, 221274, 221275, 221276, 221277, 221278, 221279, 221280, 221281, 221282, 221283, 221284, 221285, 221286, 221287, 221288, 221289, 221290, 221291, 221292, 221293, 221294, 221295, 221296, 221297, 221298, 221299, 221300, 221301, 221302, 221303, 221304, 221305, 221306, 221307, 221308, 221309, 221310, 221311, 221312, 221313, 221314, 221315, 221316, 221317, 221318, 221319, 221320, 221321, 221322, 221323, 221324, 221325, 221326, 221327, 221328, 221329, 221330, 221331, 221332, 221333, 221334, 221335, 221336, 221337, 221338, 221339, 221340, 221341, 221342, 221343, 221344, 221345, 221346, 221347, 221348, 221349, 221350, 221351, 221352, 221353, 221354, 221355, 221356, 221357, 221358, 221359, 221360, 221361, 221362, 221363, 221364, 221365, 221366, 221367, 221368, 221369, 221370, 221371, 221372, 221373, 221374, 221375, 221376, 221377, 221378, 221379, 221380, 221381, 221382, 221383, 221384, 221385, 221386, 221387, 221388, 221389, 221390, 221391, 221392, 221393, 221394, 221395, 221396, 221397, 221398, 221399, 221400, 221401, 221402, 221403, 221404, 221405, 221406, 221407, 221408, 221409, 221410, 221411, 221412, 221413, 221414, 221415, 221416, 221417, 221418, 221419, 221420, 221421, 221422, 221423, 221424, 221425, 221426, 221427, 221428, 221429, 221430, 221431, 221432, 221433, 221434, 221435, 221436, 221437, 221438, 221439, 221440, 221441, 221442, 221443, 221444, 221445, 221446, 221447, 221448, 221449, 221450, 221451, 221452, 221453, 221454, 221455, 221456, 221457, 221458, 221459, 221460, 221461, 221462, 221463, 221464, 221465, 221466, 221467, 221468, 221469, 221470, 221471, 221472, 221473, 221474, 221475, 221476, 221477, 221478, 221479, 221480, 221481, 221482, 221483, 221484, 221485, 221486, 221487, 221488, 221489, 221490, 221491, 221492, 221493, 221494, 221495, 221496, 221497, 221498, 221499, 221500, 221501, 221502, 221503, 221504, 221505, 221506, 221507, 221508, 221509, 221510, 221511, 221512, 221513, 221514, 221515, 221516, 221517, 221518, 221519, 221520, 221521, 221522, 221523, 221524, 221525, 221526, 221527, 221528, 221529, 221530, 221531, 221532, 221533, 221534, 221535, 221536, 221537, 221538, 221539, 221540, 221541, 221542, 221543, 221544, 221545, 221546, 221547, 221548, 221549, 221550, 221551, 221552, 221553, 221554, 221555, 221556, 221557, 221558, 221559, 221560, 221561, 221562, 221563, 221564, 221565, 221566, 221567, 221568, 221569, 221570, 221571, 221572, 221573, 221574, 221575, 221576, 221577, 221578, 221579, 221580, 221581, 221582, 221583, 221584, 221585, 221586, 221587, 221588, 221589, 221590, 221591, 221592, 221593, 221594, 221595, 221596, 221597, 221598, 221599, 221600, 221601, 221602, 221603, 221604, 221605, 221606, 221607, 221608, 221609, 221610, 221611, 221612, 221613, 221614, 221615, 221616, 221617, 221618, 221619, 221620, 221621, 221622, 221623, 221624, 221625, 221626, 221627, 221628, 221629, 221630, 221631, 221632, 221633, 221634, 221635, 221636, 221637, 221638, 221639, 222663, 222664, 223688, 223689, 224713, 225737, 226761, 227785, 228809, 228810, 228811, 228812, 228813, 229837, 229838, 230862, 230863, 231887, 231888, 232912, 232913, 233937, 233938, 234962, 234963, 235987, 235988, 235989, 237013, 237014, 238038, 238039, 239063, 239064, 240088, 240089, 241113, 241114, 242138, 242139, 243163, 243164, 244188, 244189, 245213, 245214, 246238, 246239, 247263, 247264, 248288, 248289, 249313, 249314, 250338, 250339, 251363, 251364, 251365, 251366, 251367, 252391, 252392, 253416, 253417, 254441, 254442, 255466, 256490, 256491, 257515, 257516, 258540, 259564, 260588, 260589, 261613, 261614, 262638, 262639, 263663, 263664, 264688, 264689, 265713, 265714, 266738, 266739, 267763, 267764, 268788, 268789, 269813, 269814, 270838, 270839, 271863, 271864, 272888, 272889, 273913, 273914, 274938, 274939, 275963, 275964, 276988, 276989, 278013, 278014, 279038, 280062, 280063, 281087, 281088, 282112, 282113, 283137, 283138, 284162, 284163, 285187, 285188, 286212, 286213, 287237, 287238, 288262, 288263, 289287, 289288, 290312, 290313, 291337, 291338, 292362, 292363, 293387, 293388, 294412, 294413, 295437, 295438, 296462, 296463, 297487, 297488, 298512, 298513, 299537, 300561, 301585, 302609, 303633, 304657, 305681, 306705, 307729, 308753, 309777, 310801, 311825, 312849, 313873, 314897, 315921, 316945, 317969, 318993, 320017, 321041, 322065, 323089, 324113, 325137, 326161, 326162, 326163, 326164, 326165, 326166, 326167, 326168, 326169, 326170, 326171, 326172, 326173, 326174, 326175, 326176, 326177, 326178, 326179, 326180, 326181, 326182, 326183, 326184, 326185, 326186, 326187, 326188, 327212, 327213, 328237, 328238, 329262, 329263, 330287, 330288, 331312, 331313, 332337, 332338, 333362, 333363, 334387, 334388, 335412, 336436, 336437, 337461, 337462, 338486, 338487, 339511, 339512, 340536, 340537, 341561, 341562, 342586, 342587, 343611, 343612, 344636, 344637, 345661, 345662, 346686, 346687, 347711, 347712, 348736, 348737, 349761, 349762, 350786, 350787, 350788, 351812, 351813, 352837, 352838, 353862, 353863, 354887, 354888, 355912, 355913, 356937, 356938, 357962, 357963, 358987, 360011, 361035, 362059, 363083, 364107, 365131, 366155, 367179, 368203, 369227, 370251, 371275, 372299, 373323, 374347, 375371, 376395, 377419, 378443, 379467, 380491, 381515, 382539, 383563, 384587, 385611, 386635, 387659, 388683, 389707, 390731, 391755, 392779, 393803, 394827, 395851, 396875, 397899, 398923, 399947, 400971, 401995, 403019, 404043, 405067, 406091, 407115, 408139, 409163, 410187, 411211, 412235, 413259, 414283, 415307, 416331, 417355, 418379, 419403, 420427, 421451, 422475, 423499, 424523, 425547, 426571, 427595, 428619, 429643, 430667, 431691, 432715, 433739, 434763, 435787, 436811, 437835, 438859, 439883, 440907, 441931, 442955, 442956, 442957, 442958, 442959, 442960, 442961, 442962, 442963, 442964, 442965, 442966, 442967, 442968, 442969, 442970, 442971, 442972, 442973, 442974, 442975, 442976, 442977, 442978, 442979, 442980, 442981, 442982, 442983, 442984, 442985, 442986, 442987, 442988, 442989, 442990, 442991, 442992, 442993, 442994, 442995, 442996, 442997, 442998, 442999, 443000, 443001, 443002, 443003, 443004, 443005, 443006, 443007, 443008, 443009, 443010, 443011, 443012, 443013, 443014, 443015, 443016, 443017, 443018, 443019, 443020, 443021, 443022, 443023, 443024, 443025, 443026, 443027, 443028, 443029, 443030, 443031, 443032, 443033, 443034, 443035, 443036, 444060, 444061, 445085, 445086, 446110, 446111, 447135, 447136, 448160, 448161, 449185, 449186, 450210, 450211, 451235, 451236, 452260, 452261, 453285, 453286, 454310, 454311, 455335, 455336, 456360, 456361, 457385, 457386, 458410, 458411, 459435, 459436, 460460, 460461, 461485, 461486, 462510, 462511, 463535, 463536, 464560, 464561, 465585, 465586, 466610, 466611, 467635, 467636, 468660, 468661, 469685, 469686, 470710, 470711, 471735, 471736, 472760, 472761, 473785, 473786, 474810, 474811, 475835, 475836, 476860, 476861, 476862, 476863, 477887, 477888, 478912, 478913, 479937, 479938, 480962, 480963, 481987, 483011, 484035, 484036, 485060, 485061, 486085, 486086, 487110, 487111, 488135, 488136, 489160, 489161, 490185, 490186, 491210, 491211, 492235, 492236, 493260, 494284, 494285, 495309, 495310, 496334, 496335, 497359, 498383, 498384, 499408, 499409, 500433, 501457, 501458, 502482, 502483, 503507, 503508, 504532, 505556, 505557, 506581, 506582, 507606, 507607, 508631, 509655, 509656, 510680, 510681, 511705, 512729, 512730, 513754, 513755, 514779, 514780, 515804, 516828, 516829, 517853, 517854, 518878, 519902, 519903, 520927, 520928, 521952, 521953, 522977, 524001, 524002, 525026, 525027, 526051, 526052, 527076, 528100, 528101, 529125, 529126, 530150, 530151, 531175, 532199, 532200, 533224, 533225, 534249, 534250, 535274, 535275, 536299, 537323, 537324, 538348, 538349, 539373, 539374, 540398, 541422, 541423, 542447, 542448, 543472, 543473, 544497, 545521, 545522, 546546, 546547, 547571, 547572, 548596, 548597, 549621, 550645, 550646, 551670, 551671, 552695, 552696, 553720, 554744, 554745, 555769, 555770, 556794, 557818, 558842, 559866, 560890, 561914, 562938, 563962, 564986, 566010, 567034, 568058, 569082, 570106, 571130, 572154, 573178, 574202, 575226, 576250, 577274, 578298, 579322, 580346, 581370, 582394, 583418, 584442, 585466, 586490, 587514, 588538, 589562, 590586, 591610, 592634, 593658, 594682, 595706, 596730, 597754, 598778, 599802, 600826, 601850, 602874, 603898, 604922, 605946, 606970, 607994, 609018, 610042, 611066, 612090, 613114, 614138, 615162, 616186, 617210, 618234, 619258, 620282, 621306, 622330, 623354, 624378, 625402, 626426, 627450, 628474, 628475, 629499, 630523, 630524, 631548, 631549, 632573, 633597, 633598, 634622, 634623, 635647, 636671, 636672, 637696, 637697, 638721, 638722, 639746, 640770, 640771, 641795, 641796, 642820, 643844, 643845, 644869, 645893, 646917, 647941, 648965, 649989, 651013, 652037, 653061, 654085, 655109, 656133, 656134, 656135, 656136, 656137, 656138, 656139, 656140, 656141, 656142, 656143, 656144, 656145, 656146, 656147, 656148, 656149, 656150, 656151, 656152, 656153, 656154, 656155, 656156, 656157, 656158, 656159, 656160, 656161, 656162, 656163, 656164, 656165, 656166, 656167, 656168, 656169, 656170, 656171, 656172, 656173, 656174, 656175, 656176, 656177, 656178, 656179, 656180, 656181, 656182, 656183, 656184, 656185, 656186, 656187, 656188, 656189, 656190, 656191, 656192, 656193, 656194, 656195, 656196, 656197, 656198, 657222, 657223, 658247, 658248, 659272, 660296, 660297, 661321, 661322, 662346, 662347, 663371, 664395, 664396, 665420, 665421, 666445, 666446, 667470, 668494, 668495, 669519, 669520, 670544, 670545, 671569, 672593, 672594, 673618, 673619, 674643, 674644, 675668, 675669, 676693, 677717, 677718, 678742, 678743, 679767, 679768, 680792, 681816, 681817, 682841, 682842, 683866, 683867, 684891, 685915, 685916, 686940, 686941, 687965, 687966, 688990, 690014, 690015, 691039, 691040, 692064, 692065, 693089, 693090, 694114, 695138, 695139, 696163, 696164, 697188, 697189, 698213, 699237, 699238, 700262, 700263, 701287, 701288, 702312, 703336, 703337, 704361, 704362, 705386, 705387, 706411, 706412, 707436, 708460, 708461, 709485, 709486, 710510, 710511, 711535, 712559, 712560, 713584, 713585, 714609, 714610, 715634, 716658, 716659, 717683, 717684, 718708, 718709, 719733, 720757, 720758, 721782, 721783, 722807, 722808, 723832, 723833, 724857, 725881, 725882, 726906, 726907, 727931, 727932, 728956, 729980, 729981, 731005, 731006, 732030, 732031, 733055, 734079, 734080, 735104, 735105, 736129, 736130, 737154, 738178, 738179, 739203, 739204, 740228, 740229, 741253, 742277, 742278, 743302, 743303, 744327, 744328, 745352, 746376, 746377, 747401, 747402, 748426, 748427, 749451, 750475, 750476, 751500, 751501, 752525, 753549, 754573, 755597, 756621, 757645, 758669, 759693, 760717, 761741, 762765, 763789, 764813, 765837, 766861, 767885, 768909, 769933, 770957, 771981, 773005, 774029, 775053, 776077, 777101, 778125, 779149, 780173, 781197, 782221, 783245, 784269, 785293, 786317, 787341, 788365, 789389, 790413, 791437, 792461, 793485, 794509, 795533, 796557, 797581, 798605, 799629, 800653, 801677, 802701, 803725, 804749, 805773, 806797, 807821, 808845, 809869, 810893, 811917, 812941, 813965, 814989, 816013, 817037, 818061, 819085, 820109, 821133, 822157, 823181, 824205, 825229, 826253, 827277, 828301, 829325, 830349, 831373, 832397, 833421, 834445, 835469, 836493, 837517, 838541, 839565, 840589, 841613, 842637, 843661, 844685, 845709, 846733, 847757, 848781, 849805, 850829, 851853, 852877, 853901, 854925, 855949, 856973, 857997, 859021, 860045, 861069, 862093, 863117, 864141, 865165, 866189, 867213, 868237, 869261, 870285, 871309, 872333, 873357, 874381, 875405, 876429, 877453, 878477, 879501, 880525, 881549, 882573, 883597, 884621, 885645, 886669, 887693, 888717, 889741, 890765, 891789, 892813, 893837, 894861, 895885, 896909, 897933, 898957, 899981, 901005, 902029, 903053, 904077, 905101, 906125, 907149, 908173, 909197, 910221, 911245, 912269, 913293, 914317, 915341, 916365, 917389, 918413, 919437, 920461, 921485, 922509, 923533, 924557, 925581, 926605, 927629, 928653, 929677, 929678, 930702, 931726, 931727, 932751, 932752, 933776, 934800, 934801, 935825, 936849, 936850, 937874, 937875, 938899, 939923, 939924, 940948, 941972, 941973, 942997, 942998, 944022, 945046, 945047, 946071, 947095, 947096, 948120, 948121, 949145, 950169, 950170, 951194, 952218, 952219, 953243, 953244, 954268, 955292, 955293, 956317, 957341, 957342, 958366, 958367, 959391, 960415, 960416, 961440, 962464, 962465, 963489, 963490, 964514, 965538, 965539, 966563, 967587, 967588, 968612, 969636, 969637, 970661, 970662, 971686, 972710, 972711, 973735, 974759, 974760, 975784, 975785, 976809, 977833, 977834, 978858, 979882, 979883, 980907, 981931, 981932, 982956, 982957, 983981, 985005, 985006, 986030, 987054, 987055, 988079, 988080, 989104, 990128, 990129, 991153, 992177, 992178, 993202, 993203, 994227, 995251, 995252, 996276, 997300, 997301, 998325, 998326, 999350, 1000374, 1000375, 1001399, 1002423, 1002424, 1003448, 1003449, 1004473, 1005497, 1005498, 1006522, 1007546, 1007547, 1008571, 1008572, 1009596, 1010620, 1010621, 1011645, 1012669, 1012670, 1013694, 1013695, 1014719, 1015743, 1015744, 1016768, 1017792, 1017793, 1018817, 1018818, 1019842, 1020866, 1020867, 1021891, 1022915, 1022916, 1023940, 1024964, 1024965, 1025989, 1027013, 1027014, 1028038, 1029062, 1029063, 1030087, 1031111, 1031112, 1032136, 1033160, 1033161, 1034185, 1035209, 1035210, 1036234, 1036235, 1037259, 1038283, 1038284, 1039308, 1040332, 1040333, 1041357, 1041358, 1042382, 1043406, 1043407, 1044431, 1045455, 1045456, 1046480, 1046481, 1047505, 1048529, 1048530, 1048531, 1048532, 1048533, 1048534, 1048535, 1048536, 1048537, 1048538, 1048539, 1048540, 1048541, 1048542, 1048543, 1048544, 1048545, 1048546, 1048547, 1048548, 1048549, 1048550, 1048551, 1048552, 1048553, 1048554, 1048555, 1048556, 1048557, 1048558, 1048559, 1048560, 1048561, 1048562, 1048563, 1048564, 1048565, 1048566, 1048567, 1048568, 1048569, 1048570, 1048571, 1048572, 1048573, 1048574, 1048575
        ] 
    
    c = 0
    
    for i in range(a.shape[0]):
        for j in range(a.shape[1]):
            if (size*i+j) in path:
                c += 1
                a[i][j] = 2
    
    cMap = cols.ListedColormap(['w', 'silver', 'r'])
    plt.figure()
    plt.rcParams['figure.dpi'] = 1000000
    plt.pcolormesh(a, cmap=cMap)
    plt.gca().set_aspect('equal') #set the x and y axes to the same scale
    plt.xticks([]) # remove the tick marks by setting to an empty list
    plt.yticks([]) # remove the tick marks by setting to an empty list
    plt.gca().invert_yaxis() #invert the y-axis so the first row of data is at the top
    plt.savefig(sys.argv[2])
    plt.show()